<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas Reveal Effect - Vanilla JS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">

    <style>
        body {
            background-color: #000000;
            color: #ffffff;
        }
        .font-orbitron { font-family: 'Orbitron', sans-serif; }
        .card-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1; /* Place it above the background but below the text */
        }
    </style>
</head>
<body>

    <div class="py-20 flex flex-col lg:flex-row items-center justify-center bg-white dark:bg-black w-full gap-4 mx-auto px-8">
        
        <div class="canvas-card border border-black/[0.2] group/canvas-card flex items-center justify-center dark:border-white/[0.2] max-w-sm w-full mx-auto p-4 h-[30rem] relative">
            <div class="card-canvas-container absolute inset-0 h-full w-full">
                </div>
            <div class="relative z-20">
                <div class="text-center group-hover/canvas-card:-translate-y-4 group-hover/canvas-card:opacity-0 transition duration-200 w-full mx-auto flex items-center justify-center">
                    <svg width="66" height="65" viewBox="0 0 66 65" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-black dark:text-white"><path d="M8 8.05571C8 8.05571 54.9009 18.1782 57.8687 30.062C60.8365 41.9458 9.05432 57.4696 9.05432 57.4696" stroke="currentColor" stroke-width="15" stroke-miterlimit="3.86874" stroke-linecap="round" style="mix-blend-mode: darken;"></path></svg>
                </div>
                <h2 class="dark:text-white text-xl opacity-0 group-hover/canvas-card:opacity-100 relative z-10 text-black mt-4 font-bold group-hover/canvas-card:text-white group-hover/canvas-card:-translate-y-2 transition duration-200 font-orbitron">
                    Sheetal is Nisha
                </h2>
            </div>
        </div>

        <div class="canvas-card border border-black/[0.2] group/canvas-card flex items-center justify-center dark:border-white/[0.2] max-w-sm w-full mx-auto p-4 h-[30rem] relative">
            <div class="card-canvas-container absolute inset-0 h-full w-full">
                </div>
            <div class="relative z-20">
                <div class="text-center group-hover/canvas-card:-translate-y-4 group-hover/canvas-card:opacity-0 transition duration-200 w-full mx-auto flex items-center justify-center">
                    <svg width="66" height="65" viewBox="0 0 66 65" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-black dark:text-white"><path d="M8 8.05571C8 8.05571 54.9009 18.1782 57.8687 30.062C60.8365 41.9458 9.05432 57.4696 9.05432 57.4696" stroke="currentColor" stroke-width="15" stroke-miterlimit="3.86874" stroke-linecap="round" style="mix-blend-mode: darken;"></path></svg>
                </div>
                <h2 class="dark:text-white text-xl opacity-0 group-hover/canvas-card:opacity-100 relative z-10 text-black mt-4 font-bold group-hover/canvas-card:text-white group-hover/canvas-card:-translate-y-2 transition duration-200 font-orbitron">
                    Nisha is Munni
                </h2>
            </div>
        </div>

        <div class="canvas-card border border-black/[0.2] group/canvas-card flex items-center justify-center dark:border-white/[0.2] max-w-sm w-full mx-auto p-4 h-[30rem] relative">
            <div class="card-canvas-container absolute inset-0 h-full w-full">
                </div>
            <div class="relative z-20">
                <div class="text-center group-hover/canvas-card:-translate-y-4 group-hover/canvas-card:opacity-0 transition duration-200 w-full mx-auto flex items-center justify-center">
                    <svg width="66" height="65" viewBox="0 0 66 65" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-black dark:text-white"><path d="M8 8.05571C8 8.05571 54.9009 18.1782 57.8687 30.062C60.8365 41.9458 9.05432 57.4696 9.05432 57.4696" stroke="currentColor" stroke-width="15" stroke-miterlimit="3.86874" stroke-linecap="round" style="mix-blend-mode: darken;"></path></svg>
                </div>
                <h2 class="dark:text-white text-xl opacity-0 group-hover/canvas-card:opacity-100 relative z-10 text-black mt-4 font-bold group-hover/canvas-card:text-white group-hover/canvas-card:-translate-y-2 transition duration-200 font-orbitron">
                    Munni is Aditi
                </h2>
            </div>
        </div>

    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <script type="module">
        // --- 1. SETUP: Find all cards and initialize a 3D scene for each ---
        const cards = document.querySelectorAll('.canvas-card');
        const scenes = [];
        
        // --- 2. SHADERS: GLSL code for the reveal effect ---
        const vertexShader = `
            precision mediump float;
            varying vec2 vUv;
            void main() {
                vUv = uv;
                gl_Position = vec4(position, 1.0);
            }
        `;
        const fragmentShader = `
            precision mediump float;
            varying vec2 vUv;
            uniform float u_time;
            uniform vec2 u_resolution;
            uniform vec3 u_color;
            uniform float u_animationSpeed;

            float random(vec2 st) {
                return fract(sin(dot(st.xy, vec2(12.9898, 78.233))) * 43758.5453123);
            }

            void main() {
                vec2 st = gl_FragCoord.xy / u_resolution.xy;
                float totalSize = 4.0;
                float dotSize = 2.0;

                vec2 st2 = vec2(floor(st.x * u_resolution.x / totalSize), floor(st.y * u_resolution.y / totalSize));
                
                float intro_offset = distance(u_resolution / 2.0 / totalSize, st2) * 0.01 + (random(st2) * 0.15);
                float opacity = step(intro_offset, u_time * u_animationSpeed);
                opacity *= clamp((1.0 - step(intro_offset + 0.1, u_time * u_animationSpeed)) * 1.25, 1.0, 1.25);
                
                opacity *= 1.0 - step(dotSize / totalSize, fract(st.x * u_resolution.x / totalSize));
                opacity *= 1.0 - step(dotSize / totalSize, fract(st.y * u_resolution.y / totalSize));

                gl_FragColor = vec4(u_color, opacity);
                gl_FragColor.rgb *= gl_FragColor.a;
            }
        `;

        cards.forEach((card, index) => {
            const container = card.querySelector('.card-canvas-container');
            const canvas = document.createElement('canvas');
            canvas.className = 'card-canvas';
            container.appendChild(canvas);
            
            const scene = new THREE.Scene();
            const camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0.1, 10);
            const renderer = new THREE.WebGLRenderer({ canvas, alpha: true });
            
            // --- Define different properties for each card ---
            let colors, animationSpeed;
            if (index === 0) {
                colors = [0, 71, 56]; // emerald-900
                animationSpeed = 5.1;
            } else if (index === 1) {
                colors = [236, 72, 153]; // pink
                animationSpeed = 3.0;
            } else {
                colors = [2, 132, 199]; // sky-600
                animationSpeed = 3.0;
            }

            const uniforms = {
                u_time: { value: 0.0 },
                u_resolution: { value: new THREE.Vector2() },
                u_color: { value: new THREE.Color(`rgb(${colors[0]}, ${colors[1]}, ${colors[2]})`) },
                u_animationSpeed: { value: animationSpeed }
            };

            const material = new THREE.ShaderMaterial({
                vertexShader,
                fragmentShader,
                uniforms,
                transparent: true,
                blending: THREE.CustomBlending,
                blendSrc: THREE.SrcAlphaFactor,
                blendDst: THREE.OneFactor,
            });

            const geometry = new THREE.PlaneGeometry(2, 2);
            const mesh = new THREE.Mesh(geometry, material);
            scene.add(mesh);
            
            scenes.push({ scene, camera, renderer, material, uniforms });
        });
        
        // --- 3. ANIMATION: Main loop that updates all canvases ---
        function animate() {
            scenes.forEach(s => {
                // We will control u_time with GSAP on hover
                s.renderer.render(s.scene, s.camera);
            });
            requestAnimationFrame(animate);
        }
        animate();
        
        // --- 4. INTERACTION: Handle mouse hover to trigger the animation ---
        cards.forEach((card, index) => {
            const sceneData = scenes[index];
            let hoverAnimation;

            card.addEventListener('mouseenter', () => {
                if (hoverAnimation) hoverAnimation.kill(); // Kill previous animation
                hoverAnimation = gsap.to(sceneData.uniforms.u_time, {
                    value: 1.5, // Animate time forward
                    duration: 1,
                    ease: "power2.out"
                });
            });

            card.addEventListener('mouseleave', () => {
                if (hoverAnimation) hoverAnimation.kill();
                hoverAnimation = gsap.to(sceneData.uniforms.u_time, {
                    value: 0, // Animate time backward
                    duration: 0.7,
                    ease: "power2.inOut"
                });
            });
        });

        // --- 5. RESPONSIVENESS ---
        function onResize() {
            scenes.forEach(s => {
                const { renderer, uniforms } = s;
                const container = renderer.domElement.parentElement;
                if(container){
                    renderer.setSize(container.clientWidth, container.clientHeight);
                    renderer.setPixelRatio(window.devicePixelRatio);
                    uniforms.u_resolution.value.set(container.clientWidth, container.clientHeight);
                }
            });
        }
        window.addEventListener('resize', onResize);
        onResize(); // Initial call
        
    </script>

</body>
</html>