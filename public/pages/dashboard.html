<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YUKU Protocol - Canvas Reveal</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Roboto+Mono:wght@300;400&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-dark: #000000;
            --accent-green: #00ff7f;
            --text-primary: #f0f0f0;
            --text-secondary: #a0a0a0;
            --border-color: rgba(255, 255, 255, 0.2);
        }
        * { cursor: none; }
        body {
            background-color: var(--bg-dark);
            color: var(--text-primary);
            font-family: 'Roboto Mono', monospace;
        }
        .font-orbitron { font-family: 'Orbitron', sans-serif; }
        
        #cursor-follower {
            position: fixed; top: 0; left: 0; width: 32px; height: 32px;
            border: 2px solid var(--accent-green);
            border-radius: 50%;
            pointer-events: none; z-index: 9999;
            transform: translate(-50%, -50%);
            transition: transform 0.2s ease-out, width 0.3s ease, height 0.3s ease, background-color 0.3s ease;
        }
        #cursor-dot {
            position: fixed; top: 0; left: 0; width: 6px; height: 6px;
            background-color: var(--accent-green);
            border-radius: 50%;
            pointer-events: none; z-index: 9999;
            transform: translate(-50%, -50%);
        }
        body.cursor-hover #cursor-follower {
            transform: scale(1.5);
            background-color: rgba(0, 255, 127, 0.1);
        }
        .reveal-card {
            border: 1px solid var(--border-color);
            position: relative;
            height: 30rem;
            overflow: hidden;
        }
        .reveal-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        .reveal-card:hover .reveal-canvas {
            opacity: 1;
        }
    </style>
</head>
<body class="antialiased">

    <div id="cursor-follower"></div>
    <div id="cursor-dot"></div>

    <div class="py-20 px-4">
        <div class="text-center mb-16">
            <h1 class="font-orbitron text-5xl md:text-7xl font-black uppercase text-white">Neural Synthesis</h1>
            <p class="mt-4 max-w-2xl mx-auto text-text-secondary">Hover over the nodes to reveal the core logic.</p>
        </div>

        <div class="flex flex-col lg:flex-row items-center justify-center w-full max-w-7xl gap-4 mx-auto">
            <div class="reveal-card group max-w-sm w-full mx-auto p-4 flex items-center justify-center">
                <canvas class="reveal-canvas" data-colors="[[0, 255, 127]]" data-speed="5.1" data-bg="bg-emerald-900"></canvas>
                <div class="absolute h-6 w-6 -top-3 -left-3 text-white">✚</div>
                <div class="absolute h-6 w-6 -bottom-3 -left-3 text-white">✚</div>
                <div class="absolute h-6 w-6 -top-3 -right-3 text-white">✚</div>
                <div class="absolute h-6 w-6 -bottom-3 -right-3 text-white">✚</div>

                <div class="relative z-20 text-center">
                    <div class="card-icon mx-auto flex items-center justify-center">
                        <AceternityIcon />
                    </div>
                    <h2 class="card-title text-white text-3xl font-bold mt-4">Node Sheetal</h2>
                </div>
            </div>

            <div class="reveal-card group max-w-sm w-full mx-auto p-4 flex items-center justify-center">
                <canvas class="reveal-canvas" data-colors="[[236, 72, 153], [232, 121, 249]]" data-speed="3" data-bg="bg-black"></canvas>
                <div class="absolute h-6 w-6 -top-3 -left-3 text-white">✚</div>
                <div class="absolute h-6 w-6 -bottom-3 -left-3 text-white">✚</div>
                <div class="absolute h-6 w-6 -top-3 -right-3 text-white">✚</div>
                <div class="absolute h-6 w-6 -bottom-3 -right-3 text-white">✚</div>

                <div class="relative z-20 text-center">
                    <div class="card-icon mx-auto flex items-center justify-center">
                        <AceternityIcon />
                    </div>
                    <h2 class="card-title text-white text-3xl font-bold mt-4">Node Nisha</h2>
                </div>
            </div>

            <div class="reveal-card group max-w-sm w-full mx-auto p-4 flex items-center justify-center">
                <canvas class="reveal-canvas" data-colors="[[125, 211, 252]]" data-speed="3" data-bg="bg-sky-600"></canvas>
                <div class="absolute h-6 w-6 -top-3 -left-3 text-white">✚</div>
                <div class="absolute h-6 w-6 -bottom-3 -left-3 text-white">✚</div>
                <div class="absolute h-6 w-6 -top-3 -right-3 text-white">✚</div>
                <div class="absolute h-6 w-6 -bottom-3 -right-3 text-white">✚</div>
                
                <div class="relative z-20 text-center">
                    <div class="card-icon mx-auto flex items-center justify-center">
                        <AceternityIcon />
                    </div>
                    <h2 class="card-title text-white text-3xl font-bold mt-4">Node Aditi</h2>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <script type="module">
        // --- CURSOR LOGIC ---
        const cursorFollower = document.getElementById('cursor-follower');
        const cursorDot = document.getElementById('cursor-dot');
        const hoverables = document.querySelectorAll('.reveal-card');

        window.addEventListener('mousemove', e => {
            gsap.to(cursorFollower, { x: e.clientX, y: e.clientY, duration: 0.5, ease: "power2.out" });
            gsap.to(cursorDot, { x: e.clientX, y: e.clientY, duration: 0.2, ease: "power2.out" });
        });

        hoverables.forEach(el => {
            el.addEventListener('mouseenter', () => document.body.classList.add('cursor-hover'));
            el.addEventListener('mouseleave', () => document.body.classList.remove('cursor-hover'));
        });
        
        // --- CANVAS REVEAL EFFECT LOGIC ---
        const cards = document.querySelectorAll('.reveal-card');
        const scenes = [];

        // GLSL Fragment Shader (The core of the effect)
        const fragmentShaderSource = `
            precision mediump float;
            varying vec2 vUv;
            uniform float u_time;
            uniform vec3 u_colors[3];
            uniform vec2 u_resolution;
            uniform float u_animation_speed;

            float random(vec2 st) {
                return fract(sin(dot(st.xy, vec2(12.9898,78.233))) * 43758.5453123);
            }

            void main() {
                vec2 st = gl_FragCoord.xy / u_resolution.xy;
                float revealProgress = u_time * u_animation_speed;

                float grid_size = 4.0;
                vec2 grid_st = floor(st * grid_size) / grid_size;
                
                float intro_offset = distance(vec2(0.5), st) * 0.01 + (random(grid_st) * 0.15);
                float opacity = step(intro_offset, revealProgress);
                opacity *= clamp((1.0 - step(intro_offset + 0.1, revealProgress)) * 1.25, 1.0, 1.25);
                
                float dot_size = 3.0;
                float total_size = grid_size * 10.0;
                opacity *= 1.0 - step(dot_size / total_size, fract(st.x * total_size));
                opacity *= 1.0 - step(dot_size / total_size, fract(st.y * total_size));

                vec3 color = u_colors[int(random(grid_st) * 3.0)];

                gl_FragColor = vec4(color, opacity);
            }
        `;
        
        cards.forEach(card => {
            const canvas = card.querySelector('.reveal-canvas');
            const scene = new THREE.Scene();
            const camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0.1, 10);
            const renderer = new THREE.WebGLRenderer({ canvas, alpha: true });
            
            // Extract data from HTML
            const colors = JSON.parse(canvas.dataset.colors).map(c => new THREE.Color(c[0]/255, c[1]/255, c[2]/255));
            const animationSpeed = parseFloat(canvas.dataset.speed);
            const bgColor = canvas.dataset.bg;
            canvas.classList.add(bgColor);

            const uniforms = {
                u_time: { value: 0.0 },
                u_resolution: { value: new THREE.Vector2() },
                u_colors: { value: colors },
                u_animation_speed: { value: animationSpeed },
            };
            
            const material = new THREE.ShaderMaterial({
                vertexShader: `varying vec2 vUv; void main() { vUv = uv; gl_Position = vec4(position, 1.0); }`,
                fragmentShader: fragmentShaderSource,
                uniforms: uniforms,
                transparent: true,
            });
            
            const geometry = new THREE.PlaneGeometry(2, 2);
            const mesh = new THREE.Mesh(geometry, material);
            scene.add(mesh);
            
            const cardData = { renderer, scene, camera, uniforms, animation: null };
            scenes.push(cardData);

            // GSAP Hover Animations
            const icon = card.querySelector('.card-icon');
            const title = card.querySelector('.card-title');

            card.addEventListener('mouseenter', () => {
                if (cardData.animation) cardData.animation.kill();
                cardData.animation = gsap.to(uniforms.u_time, { value: 1.5, duration: 1, ease: 'power2.out' });
                gsap.to(icon, { y: -20, opacity: 0, duration: 0.3, ease: 'power2.out' });
                gsap.to(title, { y: -10, opacity: 1, duration: 0.3, ease: 'power2.out' });
            });
            card.addEventListener('mouseleave', () => {
                if (cardData.animation) cardData.animation.kill();
                cardData.animation = gsap.to(uniforms.u_time, { value: 0, duration: 1, ease: 'power2.out' });
                gsap.to(icon, { y: 0, opacity: 1, duration: 0.3, ease: 'power2.out' });
                gsap.to(title, { y: 0, opacity: 0, duration: 0.3, ease: 'power2.out' });
            });
        });

        function onResize() {
            scenes.forEach(({ renderer, uniforms }) => {
                const rect = renderer.domElement.getBoundingClientRect();
                renderer.setSize(rect.width, rect.height);
                uniforms.u_resolution.value.set(rect.width, rect.height);
            });
        }
        window.addEventListener('resize', onResize);
        onResize(); // Initial size setup

        function animate() {
            scenes.forEach(({ renderer, scene, camera }) => {
                renderer.render(scene, camera);
            });
            requestAnimationFrame(animate);
        }
        animate();

        // --- GSAP Scroll-Triggered Reveal ---
        gsap.registerPlugin(ScrollTrigger);
        gsap.from(".reveal-card", {
            opacity: 0,
            y: 100,
            stagger: 0.2,
            duration: 1,
            ease: "power3.out",
            scrollTrigger: {
                trigger: ".flex",
                start: "top 80%",
            }
        });
        
        // Helper component
        function AceternityIcon() {
            const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            svg.setAttribute("width", "66");
            svg.setAttribute("height", "65");
            svg.setAttribute("viewBox", "0 0 66 65");
            svg.setAttribute("fill", "none");
            svg.setAttribute("class", "h-10 w-10 text-black dark:text-white");
            svg.innerHTML = `<path d="M8 8.05571C8 8.05571 54.9009 18.1782 57.8687 30.062C60.8365 41.9458 9.05432 57.4696 9.05432 57.4696" stroke="currentColor" stroke-width="15" stroke-miterlimit="3.86874" stroke-linecap="round" />`;
            return svg;
        }

        document.querySelectorAll('.card-icon').forEach(el => {
            el.appendChild(AceternityIcon());
        });
        gsap.set(".card-title", { opacity: 0 }); // Initially hide titles

    </script>
</body>
</html>